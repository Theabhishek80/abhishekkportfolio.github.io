<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Abhishek Pandey | Full‑Stack + AI Integrations</title>

  <!-- Fonts & Icons -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=Poppins:wght@400;600;800&display=swap" rel="stylesheet" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet" />

  <!--
    ✅ Renovation Notes
    - Swapped skills to Full Stack + AI integrations (explicitly highlighted)
    - Modern animations (transitions, hover, reveal, floating, text typing)
    - New photo section using myimg.png (transparent), with float + tilt
    - Blog section with localStorage + JSON import/export (no backend)
    - Light/Dark mode toggle (remembered via localStorage)
    - No CSS media queries; responsiveness handled by JS via body classes
    - Clean, GitHub Pages–ready single file
  -->

  <style>
    /* =====================
       THEME & TOKENS
       ===================== */
    :root {
      --bg: #0b0f17;
      --bg-soft: #121826;
      --card: #0f1629;
      --text: #e6ebff;
      --muted: #a9b1c7;
      --brand: #7c4dff; /* violet */
      --brand-2: #00d4ff; /* cyan */
      --accent: #3de0a7; /* mint */
      --shadow: rgba(0,0,0,.35);
      --radius: 18px;
    }
    body.light {
      --bg: #f7f8fc;
      --bg-soft: #ffffff;
      --card: #ffffff;
      --text: #111827;
      --muted: #4b5563;
      --brand: #6c5ce7;
      --brand-2: #06b6d4;
      --accent: #10b981;
      --shadow: rgba(0,0,0,.08);
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      background: var(--bg);
      color: var(--text);
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      line-height: 1.6;
      overflow-x: hidden;
      transition: background .4s ease, color .4s ease;
    }

    a { color: inherit; text-decoration: none; }
    .container { width: min(1180px, 92%); margin: 0 auto; }

    /* =====================
       BACKGROUND ANIMATION (blobs)
       ===================== */
    .bg-blobs {
      position: fixed; inset: -10vmax; pointer-events: none; z-index: -1; filter: blur(60px);
      opacity: .45;
    }
    .blob {
      position: absolute; width: 40vmax; height: 40vmax; border-radius: 50%;
      background: radial-gradient(closest-side, var(--brand), transparent 70%);
      animation: drift 22s infinite ease-in-out;
    }
    .blob.b2 { background: radial-gradient(closest-side, var(--brand-2), transparent 70%); animation-duration: 28s; }
    .blob.b3 { background: radial-gradient(closest-side, var(--accent), transparent 70%); animation-duration: 26s; }
    @keyframes drift {
      0%   { transform: translate(-10vw, -8vh) scale(1); }
      50%  { transform: translate(35vw, 18vh) scale(1.2); }
      100% { transform: translate(-10vw, -8vh) scale(1); }
    }

    /* =====================
       HEADER
       ===================== */
    header {
      position: sticky; top: 0; z-index: 1000; backdrop-filter: saturate(140%) blur(10px);
      background: color-mix(in oklab, var(--bg) 74%, transparent 26%);
      border-bottom: 1px solid color-mix(in oklab, var(--text) 12%, transparent);
    }
    .nav {
      display: flex; align-items: center; justify-content: space-between; padding: 14px 0;
    }
    .brand { font-family: Poppins, Inter, sans-serif; font-weight: 800; letter-spacing: .3px; }
    .brand span { background: linear-gradient(90deg, var(--brand), var(--brand-2)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
    .nav a { opacity: .9; font-weight: 600; }
    .nav .links { display: flex; gap: 22px; align-items: center; }
    .btn-ghost { padding: 10px 14px; border-radius: 999px; border: 1px solid color-mix(in oklab, var(--text) 14%, transparent); transition: transform .2s ease, background .3s ease, border-color .3s ease; }
    .btn-ghost:hover { transform: translateY(-2px); background: color-mix(in oklab, var(--text) 6%, transparent); }

    .theme-toggle { cursor: pointer; border: 0; background: none; font-size: 20px; width: 40px; height: 40px; border-radius: 999px; display: grid; place-items: center; color: var(--text);
      transition: background .25s ease, transform .2s ease; }
    .theme-toggle:hover { background: color-mix(in oklab, var(--text) 8%, transparent); transform: translateY(-2px); }

    /* =====================
       HERO
       ===================== */
    .hero { padding: 90px 0 40px; position: relative; }
    .hero-wrap { display: grid; grid-template-columns: 1.15fr .85fr; gap: 40px; align-items: center; }
    .kicker { text-transform: uppercase; letter-spacing: .2em; font-weight: 600; opacity: .7; }
    h1 { font-family: Poppins, Inter, sans-serif; font-weight: 800; font-size: clamp(28px, 4.2vw, 54px); line-height: 1.08; margin: 8px 0 14px; }
    .grad { background: linear-gradient(90deg, var(--brand) 0%, var(--brand-2) 60%, var(--accent) 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
    .hero p { font-size: 1.05rem; opacity: .9; }

    .cta-row { margin-top: 22px; display: flex; gap: 14px; align-items: center; }
    .btn-primary { padding: 12px 18px; border-radius: 14px; font-weight: 700; background: linear-gradient(90deg, var(--brand), var(--brand-2)); color: #fff; box-shadow: 0 10px 30px var(--shadow); border: 0; cursor: pointer; transition: transform .2s ease, box-shadow .3s ease; }
    .btn-primary:hover { transform: translateY(-3px); box-shadow: 0 16px 36px var(--shadow); }

    /* Photo block */
    .photo-card { position: relative; display: grid; place-items: center; height: 360px; border-radius: var(--radius);
      background: linear-gradient(145deg, color-mix(in oklab, var(--card) 88%, transparent), color-mix(in oklab, var(--bg) 84%, transparent));
      box-shadow: 0 16px 40px var(--shadow); overflow: hidden; }
    .photo-card::after { content: ""; position: absolute; inset: 0; background: radial-gradient(60% 60% at 80% 20%, color-mix(in oklab, var(--brand-2) 20%, transparent), transparent 60%); opacity: .35; }
    .profile-img { width: 66%; max-width: 320px; will-change: transform; filter: drop-shadow(0 24px 35px rgba(0,0,0,.25)); opacity: 0; transform: translateY(12px) scale(.98); transition: transform .8s cubic-bezier(.22,1,.36,1), opacity .8s ease; }
    .photo-card.reveal .profile-img { opacity: 1; transform: translateY(0) scale(1); }

    /* =====================
       SECTION WRAPPER
       ===================== */
    section { padding: 84px 0; position: relative; }
    .section-title { display: flex; align-items: center; gap: 12px; margin-bottom: 28px; }
    .section-title i { color: var(--brand-2); }
    .section-title h2 { font-family: Poppins, Inter, sans-serif; font-weight: 800; letter-spacing: .2px; margin: 0; }
    .muted { color: var(--muted); }

    /* =====================
       SKILLS
       ===================== */
    .skills-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 18px; }
    .skill-card { background: var(--card); border: 1px solid color-mix(in oklab, var(--text) 12%, transparent); border-radius: var(--radius); padding: 18px; box-shadow: 0 10px 28px var(--shadow); transition: transform .25s ease, background .3s ease, border-color .3s ease; }
    .skill-card:hover { transform: translateY(-6px); background: color-mix(in oklab, var(--card) 92%, var(--brand) 8%); border-color: color-mix(in oklab, var(--text) 18%, transparent); }
    .skill-head { display: flex; align-items: center; gap: 10px; margin-bottom: 12px; font-weight: 700; }

    .bar { height: 10px; width: 100%; background: color-mix(in oklab, var(--text) 9%, transparent); border-radius: 999px; overflow: hidden; }
    .bar > span { display: block; height: 100%; width: 0%; border-radius: inherit; background: linear-gradient(90deg, var(--brand), var(--brand-2)); box-shadow: inset 0 0 12px rgba(255,255,255,.2); transition: width 1.2s cubic-bezier(.22,1,.36,1); }
    .skill-item { display: grid; grid-template-columns: 1fr auto; align-items: center; gap: 10px; margin: 12px 0; }
    .pill { display: inline-flex; align-items: center; gap: 8px; font-size: .9rem; background: color-mix(in oklab, var(--text) 10%, transparent); padding: 6px 10px; border-radius: 999px; }

    /* =====================
       BLOG
       ===================== */
    .blog-controls { display: flex; flex-wrap: wrap; gap: 10px; margin-bottom: 16px; }
    .blog-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 18px; }
    .post { background: var(--card); border: 1px solid color-mix(in oklab, var(--text) 12%, transparent); border-radius: var(--radius); padding: 18px; box-shadow: 0 10px 28px var(--shadow); display: grid; gap: 10px; }
    .post h3 { margin: 0; font-size: 1.05rem; }
    .date { font-size: .85rem; color: var(--muted); }
    .post .read { justify-self: start; }

    dialog.readmore { width: min(740px, 92%); border: 1px solid color-mix(in oklab, var(--text) 20%, transparent); background: var(--bg-soft); color: var(--text); border-radius: 16px; padding: 20px; }
    dialog::backdrop { background: rgba(0,0,0,.45); }

    /* =====================
       CONTACT/FOOTER
       ===================== */
    .cards-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 18px; }
    .card { background: var(--card); border: 1px solid color-mix(in oklab, var(--text) 12%, transparent); border-radius: var(--radius); padding: 18px; box-shadow: 0 10px 28px var(--shadow); }
    .socials { display: flex; gap: 10px; margin-top: 10px; }
    .socials a { width: 42px; height: 42px; display: grid; place-items: center; border-radius: 12px; border: 1px solid color-mix(in oklab, var(--text) 14%, transparent); transition: transform .2s ease, background .3s ease; }
    .socials a:hover { transform: translateY(-3px); background: color-mix(in oklab, var(--text) 7%, transparent); }

    footer { padding: 26px 0 60px; text-align: center; color: var(--muted); border-top: 1px solid color-mix(in oklab, var(--text) 10%, transparent); }

    /* =====================
       JS-DRIVEN RESPONSIVENESS (no media queries)
       Body gets classes: is-mobile (<= 820px), is-tablet (821–1100px)
       ===================== */
    body.is-mobile .hero-wrap { grid-template-columns: 1fr; }
    body.is-mobile .skills-grid { grid-template-columns: 1fr; }
    body.is-tablet .skills-grid { grid-template-columns: repeat(2, 1fr); }
    body.is-mobile .blog-grid { grid-template-columns: 1fr; }
    body.is-tablet .blog-grid { grid-template-columns: repeat(2, 1fr); }
    body.is-mobile .cards-2 { grid-template-columns: 1fr; }

    /* Subtle focus styles */
    :is(button, a, input, textarea, select):focus-visible { outline: 2px solid var(--brand-2); outline-offset: 2px; }
  </style>
</head>
<body>
  <!-- Background animated blobs -->
  <div class="bg-blobs" aria-hidden="true">
    <div class="blob" style="top:10%; left:-6%;"></div>
    <div class="blob b2" style="bottom:-2%; right:-12%;"></div>
    <div class="blob b3" style="top:40%; right:30%;"></div>
  </div>

  <!-- Header / Nav -->
  <header>
    <div class="container nav">
      <div class="brand"><span>A</span>bhishek</div>
      <nav class="links">
        <a class="btn-ghost" href="#home">Home</a>
        <a class="btn-ghost" href="#photo">Photo</a>
        <a class="btn-ghost" href="#skills">Skills</a>
        <a class="btn-ghost" href="#blog">Blog</a>
        <a class="btn-ghost" href="#contact">Contact</a>
        <button id="themeBtn" class="theme-toggle" title="Toggle light/dark"><i class="fa-solid fa-moon"></i></button>
      </nav>
    </div>
  </header>

  <!-- Hero -->
  <section id="home" class="hero">
    <div class="container hero-wrap">
      <div>
        <div class="kicker">Full‑Stack Engineer • <span class="muted">AI Integrations</span></div>
        <h1>Hi, I'm <span class="grad">Abhishek Pandey</span></h1>
        <p id="typeTarget" aria-live="polite">I build modern web apps and wire real‑world products to AI — chatbots, smart automations, and LLM‑powered features.</p>
        <div class="cta-row">
          <a class="btn-primary" href="#contact"><i class="fa-regular fa-paper-plane"></i>&nbsp; Get in touch</a>
          <a class="btn-ghost" href="#blog"><i class="fa-regular fa-newspaper"></i>&nbsp; Read my blog</a>
        </div>
      </div>
      <div class="photo-card" id="heroPhoto">
        <!-- Transparent PNG placed in repo root as myimg.png -->
        <img src="myimg.png" alt="Abhishek Pandey" class="profile-img" id="profileImg" />
      </div>
    </div>
  </section>

  <!-- Photo Section (extra spotlight & tilt) -->
  <section id="photo">
    <div class="container">
      <div class="section-title"><i class="fa-solid fa-camera"></i><h2>Photo</h2><span class="muted">floating + tilt effects</span></div>
      <div class="photo-card" id="spotlight">
        <img src="myimg.png" alt="Abhishek Pandey portrait" class="profile-img" />
      </div>
    </div>
  </section>

  <!-- Skills -->
  <section id="skills">
    <div class="container">
      <div class="section-title"><i class="fa-solid fa-screwdriver-wrench"></i><h2>Full‑Stack Skills</h2><span class="muted">with embedded AI capabilities</span></div>

      <!-- AI Integrations banner -->
      <div class="card" style="margin-bottom:14px; display:flex; align-items:center; gap:12px;">
        <i class="fa-solid fa-robot"></i>
        <div><strong>AI with Websites:</strong> OpenAI / Azure OpenAI, LangChain, vector search (Pinecone/FAISS), RAG chatbots, content generators, analytics copilots.</div>
      </div>

      <div class="skills-grid" id="skillsGrid">
        <div class="skill-card reveal">
          <div class="skill-head"><i class="fa-solid fa-code"></i> Frontend</div>
          <div class="skill-item"><span class="pill"><i class="fa-brands fa-react"></i> React/Next.js</span><span data-val>90%</span></div>
          <div class="bar"><span data-skill="90"></span></div>
          <div class="skill-item"><span class="pill"><i class="fa-solid fa-layer-group"></i> TypeScript</span><span data-val>80%</span></div>
          <div class="bar"><span data-skill="80"></span></div>
          <div class="skill-item"><span class="pill"><i class="fa-solid fa-droplet"></i> Tailwind/SC</span><span data-val>85%</span></div>
          <div class="bar"><span data-skill="85"></span></div>
        </div>

        <div class="skill-card reveal">
          <div class="skill-head"><i class="fa-solid fa-server"></i> Backend</div>
          <div class="skill-item"><span class="pill"><i class="fa-brands fa-node"></i> Node.js / Express</span><span data-val>88%</span></div>
          <div class="bar"><span data-skill="88"></span></div>
          <div class="skill-item"><span class="pill"><i class="fa-solid fa-diagram-project"></i> REST / GraphQL</span><span data-val>78%</span></div>
          <div class="bar"><span data-skill="78"></span></div>
          <div class="skill-item"><span class="pill"><i class="fa-solid fa-shield-halved"></i> Auth & Security</span><span data-val>80%</span></div>
          <div class="bar"><span data-skill="80"></span></div>
        </div>

        <div class="skill-card reveal">
          <div class="skill-head"><i class="fa-solid fa-database"></i> Databases</div>
          <div class="skill-item"><span class="pill"><i class="fa-solid fa-leaf"></i> MongoDB</span><span data-val>82%</span></div>
          <div class="bar"><span data-skill="82"></span></div>
          <div class="skill-item"><span class="pill"><i class="fa-solid fa-table"></i> PostgreSQL</span><span data-val>75%</span></div>
          <div class="bar"><span data-skill="75"></span></div>
          <div class="skill-item"><span class="pill"><i class="fa-solid fa-gauge-high"></i> Redis</span><span data-val>70%</span></div>
          <div class="bar"><span data-skill="70"></span></div>
        </div>

        <div class="skill-card reveal">
          <div class="skill-head"><i class="fa-solid fa-wand-magic-sparkles"></i> AI Tooling</div>
          <div class="skill-item"><span class="pill"><i class="fa-solid fa-brain"></i> OpenAI / Azure</span><span data-val>85%</span></div>
          <div class="bar"><span data-skill="85"></span></div>
          <div class="skill-item"><span class="pill"><i class="fa-solid fa-bezier-curve"></i> LangChain</span><span data-val>78%</span></div>
          <div class="bar"><span data-skill="78"></span></div>
          <div class="skill-item"><span class="pill"><i class="fa-solid fa-magnifying-glass"></i> Vector DB + RAG</span><span data-val>80%</span></div>
          <div class="bar"><span data-skill="80"></span></div>
        </div>

        <div class="skill-card reveal">
          <div class="skill-head"><i class="fa-solid fa-cubes"></i> DevOps & Quality</div>
          <div class="skill-item"><span class="pill"><i class="fa-brands fa-docker"></i> Docker</span><span data-val>75%</span></div>
          <div class="bar"><span data-skill="75"></span></div>
          <div class="skill-item"><span class="pill"><i class="fa-brands fa-github"></i> CI/CD (Actions)</span><span data-val>70%</span></div>
          <div class="bar"><span data-skill="70"></span></div>
          <div class="skill-item"><span class="pill"><i class="fa-solid fa-cloud-arrow-up"></i> Vercel/Render</span><span data-val>80%</span></div>
          <div class="bar"><span data-skill="80"></span></div>
        </div>

        <div class="skill-card reveal">
          <div class="skill-head"><i class="fa-solid fa-comments"></i> Soft Skills</div>
          <div class="skill-item"><span class="pill"><i class="fa-solid fa-lightbulb"></i> Problem Solving</span><span data-val>90%</span></div>
          <div class="bar"><span data-skill="90"></span></div>
          <div class="skill-item"><span class="pill"><i class="fa-solid fa-people-group"></i> Communication</span><span data-val>85%</span></div>
          <div class="bar"><span data-skill="85"></span></div>
          <div class="skill-item"><span class="pill"><i class="fa-solid fa-timeline"></i> Project Delivery</span><span data-val>80%</span></div>
          <div class="bar"><span data-skill="80"></span></div>
        </div>
      </div>
    </div>
  </section>

  <!-- Blog -->
  <section id="blog">
    <div class="container">
      <div class="section-title"><i class="fa-regular fa-newspaper"></i><h2>Blog</h2><span class="muted">write, import JSON, store locally</span></div>

      <div class="blog-controls">
        <button class="btn-primary" id="addDemo">Add demo posts</button>
        <button class="btn-ghost" id="exportBtn"><i class="fa-solid fa-file-arrow-down"></i>&nbsp; Export JSON</button>
        <label class="btn-ghost" style="cursor:pointer;">
          <input type="file" id="importInput" accept="application/json" hidden />
          <i class="fa-solid fa-file-arrow-up"></i>&nbsp; Import JSON
        </label>
        <button class="btn-ghost" id="newPostBtn"><i class="fa-solid fa-plus"></i>&nbsp; New Post</button>
      </div>

      <div id="blogGrid" class="blog-grid"></div>

      <!-- New Post Dialog -->
      <dialog id="postDialog" class="readmore">
        <form method="dialog" id="postForm" style="display:grid; gap:10px;">
          <h3 style="margin:0;">New Blog Post</h3>
          <input required name="title" placeholder="Title" />
          <input required name="date" type="date" />
          <textarea required name="desc" rows="4" placeholder="Short description..."></textarea>
          <textarea name="content" rows="6" placeholder="Full content (optional)"></textarea>
          <div style="display:flex; gap:10px; justify-content:flex-end; margin-top:6px;">
            <button class="btn-ghost" value="cancel">Cancel</button>
            <button class="btn-primary" value="save">Save</button>
          </div>
        </form>
      </dialog>

      <!-- Read More Dialog -->
      <dialog id="readDialog" class="readmore">
        <article id="readArticle" style="display:grid; gap:6px;"></article>
        <div style="text-align:right; margin-top:8px;"><button class="btn-ghost" id="closeRead">Close</button></div>
      </dialog>
    </div>
  </section>

  <!-- Contact -->
  <section id="contact">
    <div class="container">
      <div class="section-title"><i class="fa-regular fa-paper-plane"></i><h2>Contact</h2><span class="muted">let's build something</span></div>
      <div class="cards-2">
        <div class="card">
          <h3>Reach me</h3>
          <p><i class="fa-solid fa-location-dot"></i> Bhopal, Madhya Pradesh, India</p>
          <p><i class="fa-regular fa-envelope"></i> abhishekpade16@gmail.com</p>
          <p><i class="fa-solid fa-phone"></i> +91 9301708816</p>
          <div class="socials">
            <a href="https://github.com/Theabhishek80" target="_blank" rel="noopener" aria-label="GitHub"><i class="fab fa-github"></i></a>
            <a href="https://www.linkedin.com/in/abhishek-pandey-5072a027a" target="_blank" rel="noopener" aria-label="LinkedIn"><i class="fab fa-linkedin"></i></a>
            <a href="https://x.com/theabhishek100" target="_blank" rel="noopener" aria-label="X (Twitter)"><i class="fab fa-x-twitter"></i></a>
            <a href="https://www.instagram.com/imabhishekkp" target="_blank" rel="noopener" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
          </div>
        </div>
        <div class="card">
          <h3>Quick message</h3>
          <form id="contactForm" style="display:grid; gap:10px;">
            <input required name="name" placeholder="Your name" />
            <input required name="email" type="email" placeholder="Email" />
            <textarea required name="message" rows="5" placeholder="Your message"></textarea>
            <button class="btn-primary" type="submit">Send</button>
            <small class="muted">No backend yet — form shows a success toast. Hook EmailJS later if you like.</small>
          </form>
        </div>
      </div>
    </div>
  </section>

  <footer>
    © <span id="year"></span> Abhishek Pandey. All rights reserved.
  </footer>

  <script>
    // =====================
    // Theme Toggle (persist)
    // =====================
    const themeBtn = document.getElementById('themeBtn');
    const storedTheme = localStorage.getItem('theme');
    if (storedTheme) document.body.classList.toggle('light', storedTheme === 'light');
    themeBtn.innerHTML = document.body.classList.contains('light') ? '<i class="fa-solid fa-sun"></i>' : '<i class="fa-solid fa-moon"></i>';
    themeBtn.addEventListener('click', () => {
      document.body.classList.toggle('light');
      const isLight = document.body.classList.contains('light');
      localStorage.setItem('theme', isLight ? 'light' : 'dark');
      themeBtn.innerHTML = isLight ? '<i class="fa-solid fa-sun"></i>' : '<i class="fa-solid fa-moon"></i>';
    });

    // =====================
    // Smooth Scroll for internal links
    // =====================
    document.querySelectorAll('a[href^="#"]').forEach(a => {
      a.addEventListener('click', e => {
        const id = a.getAttribute('href');
        const el = document.querySelector(id);
        if (!el) return;
        e.preventDefault();
        el.scrollIntoView({ behavior: 'smooth', block: 'start' });
      });
    });

    // =====================
    // JS-Driven Responsiveness (no media queries)
    // =====================
    const applyResponsive = () => {
      const w = window.innerWidth;
      document.body.classList.remove('is-mobile', 'is-tablet');
      if (w <= 820) document.body.classList.add('is-mobile');
      else if (w <= 1100) document.body.classList.add('is-tablet');
    };
    applyResponsive();
    addEventListener('resize', applyResponsive);

    // =====================
    // Intersection Reveal + Skill Bars
    // =====================
    const io = new IntersectionObserver(entries => {
      for (const ent of entries) {
        if (ent.isIntersecting) {
          ent.target.classList.add('reveal');
          // animate bars within
          ent.target.querySelectorAll('.bar > span[data-skill]').forEach(span => {
            const val = span.getAttribute('data-skill');
            requestAnimationFrame(() => (span.style.width = val + '%'));
          });
          io.unobserve(ent.target);
        }
      }
    }, { threshold: 0.25 });
    document.querySelectorAll('.reveal, .skill-card').forEach(el => io.observe(el));

    // =====================
    // Floating + Tilt for images
    // =====================
    const floaters = document.querySelectorAll('.photo-card');
    floaters.forEach(card => {
      // initial fade
      requestAnimationFrame(() => card.classList.add('reveal'));
      // gentle float
      let t = 0;
      const img = card.querySelector('.profile-img');
      function float() {
        t += 0.01;
        if (img) img.style.transform = `translateY(${Math.sin(t) * 6}px)`;
        requestAnimationFrame(float);
      }
      float();
      // tilt on pointer
      card.addEventListener('mousemove', (e) => {
        const r = card.getBoundingClientRect();
        const x = (e.clientX - r.left) / r.width - 0.5;
        const y = (e.clientY - r.top) / r.height - 0.5;
        card.style.transform = `perspective(800px) rotateX(${y * -6}deg) rotateY(${x * 6}deg)`;
      });
      card.addEventListener('mouseleave', () => {
        card.style.transform = 'perspective(800px) rotateX(0deg) rotateY(0deg)';
      });
    });

    // ensure hero image reveals once loaded
    const heroImg = document.getElementById('profileImg');
    if (heroImg) heroImg.addEventListener('load', () => heroImg.closest('.photo-card')?.classList.add('reveal'));

    // =====================
    // Typewriter-ish intro line
    // =====================
    const typeTarget = document.getElementById('typeTarget');
    const full = typeTarget.textContent.trim();
    typeTarget.textContent = '';
    let i = 0; (function type(){
      typeTarget.textContent = full.slice(0, i++);
      if (i <= full.length) setTimeout(type, 14);
    })();

    // =====================
    // Blog: LocalStorage CRUD + JSON import/export
    // =====================
    const LS_KEY = 'abhi_blog_posts_v1';
    const blogGrid = document.getElementById('blogGrid');
    const postDialog = document.getElementById('postDialog');
    const postForm = document.getElementById('postForm');
    const readDialog = document.getElementById('readDialog');
    const readArticle = document.getElementById('readArticle');

    const readPosts = () => JSON.parse(localStorage.getItem(LS_KEY) || '[]');
    const writePosts = (arr) => localStorage.setItem(LS_KEY, JSON.stringify(arr));

    function renderPosts() {
      const posts = readPosts();
      blogGrid.innerHTML = '';
      if (!posts.length) {
        blogGrid.innerHTML = '<div class="muted">No posts yet. Click "New Post" or "Add demo posts".</div>';
        return;
      }
      for (const [idx, p] of posts.entries()) {
        const card = document.createElement('article');
        card.className = 'post';
        card.innerHTML = `
          <h3>${escapeHTML(p.title)}</h3>
          <div class="date">${escapeHTML(p.date || '')}</div>
          <p>${escapeHTML(p.desc || '')}</p>
          <div style="display:flex; gap:8px;">
            <button class="btn-ghost read">Read More</button>
            <button class="btn-ghost edit"><i class="fa-regular fa-pen-to-square"></i></button>
            <button class="btn-ghost del" title="Delete"><i class="fa-regular fa-trash-can"></i></button>
          </div>
        `;
        card.querySelector('.read').addEventListener('click', () => openRead(p));
        card.querySelector('.edit').addEventListener('click', () => openEdit(idx, p));
        card.querySelector('.del').addEventListener('click', () => { if (confirm('Delete this post?')) { const arr = readPosts(); arr.splice(idx, 1); writePosts(arr); renderPosts(); } });
        blogGrid.appendChild(card);
      }
    }

    function openRead(p) {
      readArticle.innerHTML = `
        <h3 style="margin:0 0 6px;">${escapeHTML(p.title)}</h3>
        <div class="date">${escapeHTML(p.date || '')}</div>
        <p>${escapeHTML(p.desc || '')}</p>
        ${p.content ? `<div style="white-space:pre-wrap;">${escapeHTML(p.content)}</div>` : ''}
      `;
      readDialog.showModal();
    }
    document.getElementById('closeRead').addEventListener('click', () => readDialog.close());

    function openEdit(index, p) {
      postDialog.returnValue = '';
      postDialog.showModal();
      const f = postForm;
      f.title.value = p.title; f.date.value = p.date || ''; f.desc.value = p.desc || ''; f.content.value = p.content || '';
      postDialog.addEventListener('close', function onClose(){
        postDialog.removeEventListener('close', onClose);
        if (postDialog.returnValue === 'save') {
          const arr = readPosts();
          arr[index] = { title: f.title.value.trim(), date: f.date.value, desc: f.desc.value.trim(), content: f.content.value };
          writePosts(arr); renderPosts();
        }
      });
    }

    document.getElementById('newPostBtn').addEventListener('click', () => {
      postForm.reset();
      postDialog.returnValue = '';
      postDialog.showModal();
    });

    postForm.addEventListener('close', (e) => {}); // dialog handles submit
    postForm.addEventListener('submit', (e) => { e.preventDefault(); });
    postDialog.addEventListener('close', () => {
      if (postDialog.returnValue === 'save') {
        const f = postForm;
        const newPost = { title: f.title.value.trim(), date: f.date.value, desc: f.desc.value.trim(), content: f.content.value };
        const arr = readPosts(); arr.unshift(newPost); writePosts(arr); renderPosts();
      }
    });

    document.getElementById('addDemo').addEventListener('click', () => {
      const demo = [
        { title: 'Shipping a Next.js + RAG chatbot', date: new Date().toISOString().slice(0,10), desc: 'How I embedded AI search into docs using LangChain + vector DB.', content: 'Stack: Next.js, LangChain, OpenAI, Pinecone. Steps: ingest, chunk, embed, index, query with hybrid scoring...' },
        { title: 'Clean Node APIs with Zod', date: new Date(Date.now()-86400000).toISOString().slice(0,10), desc: 'I use Zod to validate every request. Here is a pattern I like.', content: 'Validate inbound DTOs, infer TS types, centralize error map, add E2E contract tests...' },
      ];
      const arr = readPosts(); writePosts(demo.concat(arr)); renderPosts();
    });

    // Import/Export JSON
    document.getElementById('exportBtn').addEventListener('click', () => {
      const blob = new Blob([JSON.stringify(readPosts(), null, 2)], { type: 'application/json' });
      const url = URL.createObjectURL(blob);
      const a = Object.assign(document.createElement('a'), { href: url, download: 'blog-posts.json' });
      document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
    });

    document.getElementById('importInput').addEventListener('change', (e) => {
      const file = e.target.files?.[0]; if (!file) return;
      const reader = new FileReader();
      reader.onload = () => {
        try {
          const json = JSON.parse(reader.result);
          if (!Array.isArray(json)) throw new Error('JSON must be an array of posts');
          // sanitize
          const cleaned = json.map(p => ({ title: String(p.title||'').slice(0,160), date: String(p.date||''), desc: String(p.desc||'').slice(0,500), content: p.content? String(p.content) : '' }));
          writePosts(cleaned); renderPosts();
        } catch(err) { alert('Invalid JSON: ' + err.message); }
      };
      reader.readAsText(file);
      e.target.value = '';
    });

    function escapeHTML(s='') { return s.replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;','\'':'&#39;'}[m])); }

    renderPosts();

    // =====================
    // Simple contact (no backend) -> toast
    // =====================
    document.getElementById('contactForm').addEventListener('submit', (e) => {
      e.preventDefault();
      alert('Thanks! Your message was noted locally. (Hook EmailJS or a server later)');
      e.target.reset();
    });

    // Footer year
    document.getElementById('year').textContent = new Date().getFullYear();
  </script>
</body>
</html>
